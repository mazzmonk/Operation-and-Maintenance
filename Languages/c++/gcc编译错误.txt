该选项相当于同时使用了下列所有的选项:
◆ unused-function:遇到仅声明过但尚未定义的静态函数时发出警告。
◆ unused-label:遇到声明过但不使用的标号的警告。
◆ unused-parameter:从未用过的函数参数的警告。
◆ unused-variable:在本地声明但从未用过的变量的警告。
◆ unused-value:仅计算但从未用过的值得警告。
◆ Format:检查对 printf 和 scanf 等函数的调用,确认各个参数类型和格式串中的
一致。
◆ implicit-int:警告没有规定类型的声明。
◆ implicit-function-:在函数在未经声明就使用时给予警告。◆ char-subscripts:警告把 char 类型作为数组下标。这是常见错误,程序员经常忘
记在某些机器上 char 有符号。
◆ missing-braces:聚合初始化两边缺少大括号。
◆ Parentheses:在某些情况下如果忽略了括号,编译器就发出警告。
◆ return-type:如果函数定义了返回类型,而默认类型是 int 型,编译器就发出警
告。同时警告那些不带返回值的 return 语句,如果他们所属的函数并非 void 类型。
◆ sequence-point:出现可疑的代码元素时,发出报警。
◆ Switch:如果某条 switch 语句的参数属于枚举类型,但是没有对应的 case 语句使
用枚举元素,编译器就发出警告(在 switch 语句中使用 default 分支能够防止这个警
告)。超出枚举范围的 case 语句同样会导致这个警告。
◆ strict-aliasing:对变量别名进行最严格的检查。
◆ unknown-pragmas:使用了不允许的#pragma。
◆ Uninitialized:在初始化之前就使用自动变量。
需要注意的是,各警告选项既然能使之生效,当然也能使之关闭。比如假设我们想要
使用-Wall 来启用个选项,同时又要关闭 unused 警告,可以通过下面的命令来达到目的:
$ gcc -Wall -Wno-unused test.c -o test
下面是使用-Wall 选项的时候没有生效的一些警告项:
◆ cast-align:一旦某个指针类型强制转换时,会导致目标所需的地址对齐边界扩
展,编译器就发出警告。例如,某些机器上只能在 2 或 4 字节边界上访问整数,如果在这
种机型上把 char *强制转换成 int *类型, 编译器就发出警告。
◆ sign-compare:将有符号类型和无符号类型数据进行比较时发出警告。
◆ missing-prototypes :如果没有预先声明函数原形就定义了全局函数,编译器就
发出警告。即使函数定义自身提供了函数原形也会产生这个警告。这样做的目的是检查没有
在头文件中声明的全局函数。
◆ Packed:当结构体带有 packed 属性但实际并没有出现紧缩式给出警告。
◆ Padded:如果结构体通过充填进行对齐则给出警告。
◆ unreachable-code:如果发现从未执行的代码时给出警告。
◆ Inline:如果某函数不能内嵌(inline),无论是声明为 inline 或者是指定了-
finline-functions 选项,编译器都将发出警告。
◆ disabled-optimization:当需要太长时间或过多资源而导致不能完成某项优化时
给出警告。
上面是使用-Wall 选项时没有生效,但又比较常用的一些警告选项。本文中要介绍的最后一个常用警告选项是-Werror。使用该选项后,GCC 发现可疑之处时不会简单的发出警告
就算完事,而是将警告作为一个错误而中断编译过程。该选项在希望得到高质量代码时非常
有用
