[Unit]
Description=Kubernetes Controller Manager
After=network.target

[Service]
ExecStart=/usr/local/bin/kube-controller-manager \
	--allocate-node-cidrs=true \
	--cluster-cidr=10.0.0.1/16 \
	--cluster-signing-cert-file=/home/k8s-admin/apps/certificates/kubernetes/ca.pem  \
	--cluster-signing-key-file=/home/k8s-admin/apps/certificates/kubernetes/ca-key.pem \
	--controllers=*,bootstrapsigner,tokencleaner \
	--kubeconfig=/home/k8s-admin/apps/certificates/kubernetes/kube-controller-manager.conf \
	--leader-elect=true \
	--node-cidr-mask-size=24 \
	--node-monitor-grace-period=40s  \
	--node-monitor-period=3s  \
	--pod-eviction-timeout=3m0s \
  	--root-ca-file=/home/k8s-admin/apps/certificates/kubernetes/ca.pem \
	--service-account-private-key-file=/home/k8s-admin/apps/certificates/kubernetes/ca-key.pem \
	--use-service-account-credentials=true \
	--v=4

Restart=on-failure
RestartSec=5
User=k8s-admin
Group=k8s-admin

[Install]
WantedBy=multi-user.target
